(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["PinBetterSaveCommon",35],{"+c4W":function(e,t,n){var i=n("711d"),o=n("4/ic"),r=n("9ggG"),s=n("9Nap");e.exports=function(e){return r(e)?i(s(e)):o(e)}},"0zyx":function(e,t,n){n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}));var i=n("mVx/"),o=n.n(i);const r=({pathname:e})=>/^\/pin\/[\w-]+\/?$/.test(e),s=e=>{const t=o()(e,e=>!r(e));return t&&(({pathname:e})=>/^\/search\/pins\//.test(e))(t)?(({pathname:e,search:t})=>{const n=/^\/search\/pins\/(\?.*)$/.exec(e),i=(t||n&&n[1]||"").substr(1).split("&").map(e=>e.split("=")).find(e=>"q"===e[0]);return i?decodeURIComponent(i[1]):""})(t):""}},"1LK5":function(e,t){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},"4/ic":function(e,t,n){var i=n("ZWtO");e.exports=function(e){return function(t){return i(t,e)}}},"711d":function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},"7vSn":function(e,t,n){},CMye:function(e,t,n){var i=n("GoyQ");e.exports=function(e){return e==e&&!i(e)}},DzJC:function(e,t,n){var i=n("sEfC"),o=n("GoyQ");e.exports=function(e,t,n){var r=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),i(e,t,{leading:r,maxWait:t,trailing:s})}},EuRG:function(e,t,n){function i(e,t){return{type:"SEARCH_PIN_CLOSEUP_VIEWED",payload:{pinId:e,query:t}}}function o(e){return{type:"SEARCH_QUERY_STARTED",payload:{query:e}}}function r(e){return{type:"SEARCH_QUERY_INVALIDATED",payload:{query:e}}}n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return r}))},GDhZ:function(e,t,n){var i=n("wF/u"),o=n("mwIZ"),r=n("hgQt"),s=n("9ggG"),a=n("CMye"),c=n("IOzZ"),d=n("9Nap");e.exports=function(e,t){return s(e)&&a(t)?c(d(e),t):function(n){var s=o(n,e);return void 0===s&&s===t?r(n,e):i(t,s,3)}}},"H/Lk":function(e,t,n){n.d(t,"a",(function(){return i}));const i=(e,t,n)=>({type:"MOST_RECENT_BOARD",payload:{id:e,name:t,url:n}})},IOzZ:function(e,t){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},IWTy:function(e,t,n){var i=n("yue5");e.exports=function(e,t,n){for(var o=-1,r=e.criteria,s=t.criteria,a=r.length,c=n.length;++o<a;){var d=i(r[o],s[o]);if(d)return o>=c?d:d*("desc"==n[o]?-1:1)}return e.index-t.index}},J8m7:function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return a})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return d})),n.d(t,"i",(function(){return l})),n.d(t,"j",(function(){return u})),n.d(t,"m",(function(){return h})),n.d(t,"n",(function(){return p})),n.d(t,"o",(function(){return b})),n.d(t,"p",(function(){return f})),n.d(t,"q",(function(){return g})),n.d(t,"r",(function(){return j})),n.d(t,"t",(function(){return m})),n.d(t,"u",(function(){return v})),n.d(t,"v",(function(){return O})),n.d(t,"w",(function(){return S})),n.d(t,"x",(function(){return x})),n.d(t,"y",(function(){return _})),n.d(t,"z",(function(){return y})),n.d(t,"A",(function(){return w})),n.d(t,"C",(function(){return I})),n.d(t,"E",(function(){return C})),n.d(t,"D",(function(){return B})),n.d(t,"F",(function(){return T})),n.d(t,"G",(function(){return R})),n.d(t,"s",(function(){return E})),n.d(t,"k",(function(){return P})),n.d(t,"l",(function(){return L})),n.d(t,"B",(function(){return A})),n.d(t,"H",(function(){return D})),n.d(t,"b",(function(){return k}));const i=101,o=93,r=116,s=9,a=8,c=16,d=12,l=3,u=18,h=105,p=79,b=78,f=77,g=76,j=1402,m=85,v=82,O=88,S=1201,x=86,_=30,y=84,w=83,I=2901,C=2904,B=2905,T=95,R=19,E=113,P=91,L=2501,A=3050,D=[a,s],k=new Map([[1,"INVALID_PARAMETERS"],[100,"INVALID_NETWORK_ACCESS_TOKEN"],[h,"FACEBOOK_ACCOUNT_NOT_LINKED"],[d,"API_SERVER_ERROR"],[1202,"LOGIN_MFA_TOKEN_INVALID"],[1203,"MFA_CONNECTION_ERROR"],[13,"API_DOWN"],[181,"GPLUS_CONNECTION_ERROR"],[14,"API_SERVER_SPAM_CONTENT"],[c,"API_REQUEST_TIMEOUT"],[50,"API_ERROR_PIN_NOT_FOUND"],[f,"INVALID_PASSWORD_FB_USER"],[b,"INVALID_PASSWORD_ERROR_CODE"],[p,"INVALID_EMAIL_ERROR_CODE"],[80,"INVALID_EMAIL_OR_PASSWORD"],[v,"LOGIN_DEACTIVATED_USER"],[w,"LOGIN_POLICY_VIOLATION_USER"],[m,"AUTO_PASSWORD_RESET_ERROR_CODE"],[x,"LOGIN_PANICKED_USER"],[87,"LOGIN_SOFT_BANNED_USER"],[o,"API_ERROR_UNDERAGE_REGISTER_ATTEMPT"],[r,"API_ERROR_OVERAGE_REGISTER_ATTEMPT"],[99,"LOGIN_PASSWORD_NOT_CREATED"],[a,"API_LIMIT_EXCEEDED_ERROR"],[s,"API_EVENT_BLOCKED_ERROR"],[R,"USER_IN_SAFE_MODE"],[y,"LOGIN_VOLUNTARILY_DEACTIVATED_USER"],[m,"LOGIN_BAD_PASSWORD_ASK_RESET"],[S,"LOGIN_MFA_REQUIRED"],[_,"LOGIN_USER_NOT_FOUND"],[O,"LOGIN_HARD_BANNED_USER"],[429,"RESPONSE_CODE_TOO_MANY_REQUESTS"],[I,"SAR_DOWNLOAD_LIMIT"],[C,"SAR_EMAIL_UNVERIFIED"],[B,"SAR_EMAIL_MISSING"]])},JC6p:function(e,t,n){var i=n("cq/+"),o=n("7GkX");e.exports=function(e,t){return e&&i(e,t,o)}},JELi:function(e,t,n){var i=n("KwMD"),o=n("ut/Y"),r=n("Sxd8"),s=Math.max,a=Math.min;e.exports=function(e,t,n){var c=null==e?0:e.length;if(!c)return-1;var d=c-1;return void 0!==n&&(d=r(n),d=n<0?s(c+d,0):a(d,c-1)),i(e,o(t,3),d,!0)}},KwMD:function(e,t){e.exports=function(e,t,n,i){for(var o=e.length,r=n+(i?1:-1);i?r--:++r<o;)if(t(e[r],r,e))return r;return-1}},O7RO:function(e,t,n){var i=n("CMye"),o=n("7GkX");e.exports=function(e){for(var t=o(e),n=t.length;n--;){var r=t[n],s=e[r];t[n]=[r,s,i(s)]}return t}},SKAX:function(e,t,n){var i=n("JC6p"),o=n("lQqw")(i);e.exports=o},WnNx:function(e,t,n){function i(e){return{type:"SHOW_REPIN_ANIMATION",payload:{pinId:e}}}function o(){return{type:"HIDE_REPIN_ANIMATION"}}function r(){return{type:"SHOW_ACCOUNT_MENU_FLYOUT"}}function s(){return{type:"HIDE_ACCOUNT_MENU_FLYOUT"}}n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return s}))},XKAG:function(e,t,n){var i=n("ut/Y"),o=n("MMmD"),r=n("7GkX");e.exports=function(e){return function(t,n,s){var a=Object(t);if(!o(t)){var c=i(n,3);t=r(t),n=function(e){return c(a[e],e,a)}}var d=e(t,n,s);return d>-1?a[c?t[d]:d]:void 0}}},ZCpW:function(e,t,n){var i=n("lm/5"),o=n("O7RO"),r=n("IOzZ");e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?r(t[0][0],t[0][1]):function(n){return n===e||i(n,e,t)}}},ZdPf:function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return s}));const i={CONDITIONAL:0,EMOTIONAL_DISDRESS_OR_SUICIDE:4},o={ABUSIVE:0,SENSITIVE:1,BRAND_UNSAFE:2};function r(e){if(null==e)return!1;let t=!!e.notices&&e.notices.length>0;var n;e.notices&&e.notices.length>0&&(null===(null===(n=e.notices[0])||void 0===n?void 0:n.title)&&(t=!1));return!!e.notice||t}function s(e){return!!e&&e.severity===o.ABUSIVE}},alwl:function(e,t,n){var i=n("eUgh"),o=n("ZWtO"),r=n("ut/Y"),s=n("l9OW"),a=n("1LK5"),c=n("sEf8"),d=n("IWTy"),l=n("zZ0H"),u=n("Z0cm");e.exports=function(e,t,n){t=t.length?i(t,(function(e){return u(e)?function(t){return o(t,1===e.length?e[0]:e)}:e})):[l];var h=-1;t=i(t,c(r));var p=s(e,(function(e,n,o){return{criteria:i(t,(function(t){return t(e)})),index:++h,value:e}}));return a(p,(function(e,t){return d(e,t,n)}))}},dtqy:function(e,t,n){var i=n("q1tI"),o=n("/MKj"),r=n("5S2N"),s=n("ANjH"),a=n("U4JR"),c=n("Sp3T"),d=n("nKUr");t.a=Object(s.compose)(Object(o.connect)(({pins:e},{pinId:t,carouselSlotCurrentIndex:n})=>{const{carousel_data:i}=e&&t&&e[t]||{},{index:o}=i||{};return void 0!==n?{carouselSlotCurrentIndex:o||n||0}:{}}),(function(e){return function(t){const[n,o]=Object(i.useState)(!1),s=Object(c.a)({shouldStopEventPropagation:!1}),{pinId:l,onDelete:u,onSubmit:h,carouselSlotCurrentIndex:p}=t;return Object(d.jsxs)(i.Fragment,{children:[Object(d.jsx)(e,{...t,handlePinEditButtonClick:s(e=>{e&&e.stopPropagation();const{component:n,onToggleModal:i}=t;i&&i(!0),Object(a.b)(101,{element:3,...n?{component:n}:{}}),o(!0)})}),n&&Object(d.jsx)(r.a,{carouselSlotCurrentIndex:p,onDelete:u,onHide:()=>{o(!1),t.onToggleModal&&t.onToggleModal(!1)},onSubmit:h,pinId:l})]})}}))},e0nq:function(e,t,n){function i(e){return{type:"PIN_BETTER_SAVE",payload:e}}function o(e){return{type:"PIN_BETTER_UNSAVE",payload:e}}function r(e){return{type:"PIN_BETTER_SELECT_BOARD_OR_SECTION",payload:e}}function s(e){return{type:"POST_REPIN_MORE_IDEAS_UPSELL_SHOWN",payload:{boardId:e}}}n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return s}))},e3KR:function(e,t,n){n.d(t,"d",(function(){return q})),n.d(t,"b",(function(){return z})),n.d(t,"c",(function(){return V})),n.d(t,"a",(function(){return K}));var i=n("q1tI"),o=n("/MKj"),r=(n("7vSn"),n("n6mq")),s=n("nKUr");var a=({image_url:e,naturalHeight:t,naturalWidth:n})=>Object(s.jsx)(r.f,{"aria-hidden":"true",marginBottom:1,marginEnd:2,marginTop:1,overflow:"hidden",width:48,height:48,children:Object(s.jsx)(r.D,{wash:!0,width:48,height:48,rounding:2,children:Object(s.jsx)(r.y,{src:e,alt:"",naturalHeight:t,naturalWidth:n})})}),c=n("yweb");function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends i.Component{constructor(...e){super(...e),d(this,"state",{hovered:!1}),d(this,"handleMouseEnter",()=>{this.setState({hovered:!0})}),d(this,"handleMouseLeave",()=>{this.setState({hovered:!1})}),d(this,"handleTouch",()=>{const{board:e,onClick:t,section:n}=this.props;t(n,e)}),d(this,"handleButtonClick",({event:e})=>{const{onButtonClick:t}=this.props;this.handleTouch(),t&&t(),e.stopPropagation()}),d(this,"tapAreaRef",Object(i.createRef)())}focus(){const e=this.tapAreaRef.current;e&&e.focus()}render(){var e,t,n,i,o,c;const{hovered:d}=this.state,{buttonText:l,section:u,showSectionSaveButton:h,useLegoLayout:p}=this.props;return Object(s.jsx)(r.bb,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTap:this.handleTouch,ref:this.tapAreaRef,children:Object(s.jsxs)(r.f,{color:d?"lightGray":"white","data-test-id":"section-row-"+(u.title||""),display:"flex",alignItems:"center",height:p?64:52,marginStart:p?2:0,marginEnd:p?2:0,padding:p?2:0,marginTop:p?0:1,rounding:3,dangerouslySetInlineStyle:{__style:p?{}:{marginLeft:53,marginRight:11}},children:[p&&!(null===(e=u.preview_pins)||void 0===e||!e.length)&&Object(s.jsx)(a,{image_url:null!==(t=u.preview_pins[0].image_square_url)&&void 0!==t?t:"",naturalHeight:null!==(n=null===(i=u.preview_pins[0].image_square_size_pixels)||void 0===i?void 0:i.height)&&void 0!==n?n:1,naturalWidth:null!==(o=null===(c=u.preview_pins[0].image_square_size_pixels)||void 0===c?void 0:c.width)&&void 0!==o?o:1}),Object(s.jsx)(r.f,{flex:"grow",paddingY:1,marginStart:p?0:4,children:Object(s.jsx)(r.cb,{lineClamp:1,weight:p?"bold":"normal",children:u.title})}),d&&h&&Object(s.jsx)(r.f,{marginEnd:p?0:2,flex:"none",children:Object(s.jsx)(r.g,{accessibilityLabel:"save button",color:"red",text:l||this.props.i18n._("Save","save button","save button"),onClick:this.handleButtonClick})})]})})}}function u(e){const t=Object(c.c)();return Object(s.jsx)(l,{...e,i18n:t})}d(l,"defaultProps",{showSectionSaveButton:!0});var h=n("w70y");function p(e){const t=Object(c.c)(),{board:n,buttonText:i,onClick:o,onButtonClick:a,showSectionSaveButton:d,useLegoLayout:l}=e,p=Object(h.a)({name:"BoardSectionsRepinResource",options:{board_id:n.id},noCache:!0}),b=p&&p.data||[];return Object(s.jsxs)(r.f,{children:[!p.isLoaded&&Object(s.jsx)(r.u,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:"100%",children:Object(s.jsx)(r.U,{accessibilityLabel:t._("loading board picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!0})}),p.isLoaded&&Object(s.jsxs)(r.f,{children:[l&&Object(s.jsx)(r.f,{marginStart:4,marginTop:2,paddingY:1,children:Object(s.jsx)(r.cb,{size:"sm",children:t._("Section","PinBetterSave.BoardFlyout.SectionPlaceholderText","section list title")})}),b.map(e=>Object(s.jsx)(u,{board:n,buttonText:i,onButtonClick:a,onClick:o,section:e,showSectionSaveButton:d,useLegoLayout:l},e.id))]})]})}function b({isBoardCreate:e,onCreateBoardClick:t,useLegoLayout:n}){const o=Object(c.c)(),[a,d]=Object(i.useState)(!1);return Object(s.jsx)(r.f,{"data-test-id":"create-board",height:"100%",display:"flex",children:Object(s.jsx)(r.bb,{onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onTap:t,rounding:2,children:Object(s.jsxs)(r.f,{display:"flex",alignItems:"center",padding:n?4:2,color:a?"lightGray":"white",width:"100%",height:"100%",children:[Object(s.jsx)(r.f,{rounding:n?2:0,dangerouslySetInlineStyle:{__style:n?{padding:"14px"}:{}},marginStart:n?0:4,marginEnd:n?2:5,color:n?"lightGray":"transparent",children:Object(s.jsx)(r.w,{accessibilityLabel:"Add a board",size:n?20:28,icon:n?"add":"add-circle",color:n?"darkGray":"red"})}),e?Object(s.jsx)(r.cb,{align:"center",lineClamp:1,weight:"bold",children:o._("Create board")}):Object(s.jsx)(r.cb,{align:"center",lineClamp:1,weight:"bold",children:o._("Create section")})]})})})}var f=n("nKlH"),g=n("eOdZ"),j=n("Ofms"),m=n("xkL+");function v({onClick:e,title:t,showIcon:n}){const o=Object(c.c)(),[a,d]=Object(i.useState)(!1);return Object(s.jsx)(r.bb,{onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onTap:()=>{e({title:t})},children:Object(s.jsxs)(r.f,{color:a?"lightGray":"white",display:"flex",alignItems:"center",height:n?64:52,marginStart:3,marginEnd:3,marginBottom:1,rounding:3,children:[Object(s.jsx)(r.f,{flex:"none",marginBottom:1,marginStart:n?1:2,marginEnd:3,marginTop:1,overflow:"hidden",width:n?48:36,height:n?48:36,rounding:n?2:1,children:Object(s.jsx)(r.f,{alignItems:n?"center":void 0,color:"lightGray",display:n?"flex":void 0,height:"100%",justifyContent:n?"center":void 0,width:"100%",children:n&&Object(s.jsx)(r.w,{icon:"add",color:"darkGray",size:20,accessibilityLabel:o._("Create board icon","BoardSuggestionRow.AccessibilityLabel.Text","accessibility label text form add icon")})})}),Object(s.jsx)(r.f,{flex:"grow",paddingY:1,children:Object(s.jsx)(r.cb,{lineClamp:1,weight:"bold",children:t})}),a&&Object(s.jsx)(r.f,{marginEnd:2,children:Object(s.jsx)(r.g,{accessibilityLabel:"create button",color:"red",text:o._("Create","create button to create a new board","create button to create a new board")})})]})})}const O=e=>{const t=Object(c.c)(),{suggestionsResource:n,onClick:o,pinBuilderSuggestions:a,inWebRepinFlowExp:d}=e,l=a||n&&n.data||[],u=Object(s.jsxs)(i.Fragment,{children:[d&&Object(s.jsx)(r.f,{marginStart:4,marginTop:2,paddingY:1,children:Object(s.jsx)(r.cb,{size:"sm",children:t._("Suggestions","PinBetterSave.BoardFlyout.SectionPlaceholderText","section list title")})}),l.map((e,t)=>Object(s.jsx)(v,{title:e.title,onClick:o,showIcon:d},t))]});return Object(s.jsx)(i.Fragment,{children:l?u:Object(s.jsx)(r.u,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:"100%",children:Object(s.jsx)(r.U,{accessibilityLabel:t._("loading board suggestions","accessibility text for loading spinner","accessibility text for loading spinner"),show:!0})})})};var S=n("0BOE"),x=n("eUcp"),_=n("Wer7"),y=n("U4JR"),w=n("8cMa"),I=n("s7xj");const C=({collaborator_count:e,useLegoLayout:t,type:n})=>t?Object(s.jsx)(r.f,{marginEnd:e?2:0,children:Object(s.jsx)(w.a,{type:n})}):Object(s.jsx)(w.a,{type:n});var B=({board:e,showCollaborativeIcon:t,showPrivateIcon:n,showProtectedIcon:i,showSectionsIcon:o,useLegoLayout:a})=>{var c;const d=(null==e||null===(c=e.collaborating_users)||void 0===c?void 0:c.length)||0;return t||n||i||o?Object(s.jsxs)(r.f,{display:"flex",direction:"row",marginEnd:a?0:5,dangerouslySetInlineStyle:{__style:{paddingLeft:8}},alignItems:"center",children:[n&&Object(s.jsx)(C,{collaborator_count:d,useLegoLayout:a,type:"secret"}),i&&Object(s.jsx)(C,{collaborator_count:d,useLegoLayout:a,type:"protected"}),t&&(a?Object(s.jsx)(I.a,{board:e,isCompact:!0,ownerOnly:!1}):Object(s.jsx)(w.a,{type:"group"})),o&&Object(s.jsx)(w.a,{type:"sections"})]}):null},T=n("JW66");function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class E extends i.Component{constructor(...e){super(...e),R(this,"state",{hovered:!1}),R(this,"handleMouseEnter",()=>{this.setState({hovered:!0})}),R(this,"handleMouseLeave",()=>{this.setState({hovered:!1})}),R(this,"handleTouch",()=>{const{board:e,onClick:t}=this.props;t(e)}),R(this,"handleButtonClick",({event:e})=>{const{onButtonClick:t}=this.props;this.handleTouch(),t&&t(),e.stopPropagation()}),R(this,"tapAreaRef",Object(i.createRef)())}focus(){const e=this.tapAreaRef.current;e&&e.focus()}render(){const{hovered:e}=this.state,{board:t,buttonText:n,isSectionOpen:i,shouldOpenSections:o,showSaveToProfile:a,showFlyoutSaveButton:c,useLegoLayout:d}=this.props,l=!!t.section_count&&t.section_count>0,u=l?"boardWithSection":"boardWithoutSection",h=t.image_cover_url;return Object(s.jsx)(j.a,{id:u,children:Object(s.jsx)(r.bb,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTap:this.handleTouch,ref:this.tapAreaRef,children:Object(s.jsxs)(r.f,{alignItems:"center",color:e?"lightGray":"white","data-test-id":"board-row-"+(t.name||""),display:"flex",height:d?64:52,marginStart:d?2:3,marginEnd:d?2:3,marginBottom:d?0:1,marginTop:d?0:1,padding:d?2:0,rounding:3,children:[Object(s.jsxs)(r.f,{"aria-hidden":"true",flex:"none",height:d?48:36,marginBottom:d?0:1,marginStart:d?0:2,marginEnd:d?2:3,marginTop:d?0:1,overflow:"hidden",width:d?48:36,children:[a&&"boardless"===t.type&&Object(s.jsx)(r.D,{rounding:2,width:48,height:48,children:Object(s.jsx)(r.f,{color:e?"white":"lightGray",display:"flex",height:"100%",width:"100%",children:Object(s.jsx)(r.f,{padding:3,children:Object(s.jsx)(r.w,{accessibilityLabel:this.props.i18n._("Save to profile icon","BoardRow.TapArea.Icon","Icon to indicate saving to profile."),color:"darkGray",icon:"history",size:24})})})}),h&&!o&&Object(s.jsx)(r.D,{height:d?48:36,rounding:2,wash:!0,width:d?48:36,children:Object(s.jsx)(r.y,{src:h,alt:"",naturalHeight:d?48:36,naturalWidth:d?48:36,fit:"cover"})}),h&&o?Object(s.jsx)(r.D,{rounding:2,wash:!0,width:d?48:36,height:d?48:36,children:Object(s.jsx)(r.y,{src:h,alt:"",naturalHeight:d?48:36,naturalWidth:d?48:36,fit:"cover"})}):Object(s.jsx)(r.f,{color:o?"lightGray":"transparent",width:"100%",height:"100%"})]}),Object(s.jsx)(r.f,{flex:"grow",paddingY:1,overflow:"hidden",marginStart:d?0:1,children:Object(s.jsx)(r.cb,{lineClamp:1,weight:o||!o?"bold":"normal",children:t.name})}),t&&(!e||e&&l&&!i)?Object(s.jsx)(r.f,{children:Object(s.jsx)(B,{board:t,isOpen:t.isOpen,showCollaborativeIcon:!!t.is_collaborative,showPrivateIcon:t.privacy===T.a.BoardPrivacy.SECRET,showProtectedIcon:t.privacy===T.a.BoardPrivacy.PROTECTED,showSectionsIcon:l&&o,useLegoLayout:d})}):null,e&&(0===t.section_count||!o)&&c&&Object(s.jsx)(r.f,{marginEnd:d?0:2,flex:"none",children:Object(s.jsx)(r.g,{accessibilityLabel:"save button",color:"red",onClick:this.handleButtonClick,text:n||this.props.i18n._("Save","save button","save button")})})]})})})}}R(E,"defaultProps",{shouldOpenSections:!0,showFlyoutSaveButton:!0});var P=Object(i.forwardRef)((e,t)=>{const n=Object(c.c)();return Object(s.jsx)(E,{...e,ref:t,i18n:n})}),L=n("QO9Q"),A=n("pLLR"),D=n("seP0");function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const N=e=>e?498:439,M=360,U=e=>e?80:52;class F extends i.PureComponent{constructor(...e){var t;super(...e),t=this,k(this,"state",{boardSuggestions:[],isSectionOpen:null,selectedBoardId:"",selectedBoardCategory:"",searchQuery:"",searchBoxFocused:!0}),k(this,"getItems",e=>{const{boardResource:t,changeBoardModal:n,showSaveToProfile:i}=this.props;if(null==t||!t.data)return[];const{all_boards:o}=t.data,r=[{boardId:"",image_cover_url:"",is_collaborative:!1,isOpen:!1,name:this.props.i18n._("Profile","pinBetterSave.initialSelection.boardlessPinsOption","Option to save to profile without a board."),privacy:"public",section_count:0,type:"boardless",url:"/me/"}],s=this.getAllBoards().map(e=>this.mapBoards(e,"allBoards",0)),a=this.getShortlist().map((e,t)=>this.mapBoards(e,"shortlist",t+1)),c=i&&!n&&o.length>=3?[...r,...a.slice(0,2)]:a,{searchQuery:d}=this.state;return d.length>=2?[...Object(S.a)(s,d)]:[...o.length<3&&i?[{type:"header",title:this.props.i18n._("Quick save and organize later","BoardFlyout.inPinBetterSaveAndLessThanThreeBoards.boardlessPinsTitle","Header saving to profile")},...r]:[],...o.length>3&&c&&c.length?[{type:"header",title:e?this.props.i18n._("Top choices","PinBetterSave.BoardFlyout.TopChoicesSectionTitle","Header for top suggestions in board picker"):this.props.i18n._("Top board suggestions","Header for top suggesions in board picker","Header for top suggesions in board picker")},...c]:[],...o.length>0?[{type:"header",title:o.length<3&&i?this.props.i18n._("Save to board","BoardFlyout.inPinBetterSaveAndLessThanThreeBoards.saveToBoardTitle","Header for boards when there are less than 3 boards in board picker"):this.props.i18n._("All boards","Header for all boards in board picker","Header for all boards in board picker")},...s]:[]]}),k(this,"mapBoards",(e,t,n)=>{const{selectedBoardId:i,selectedBoardCategory:o}=this.state,r=e.id===i&&t===o;return{...e,category:t,isOpen:r,gridIndex:n}}),k(this,"handleBack",()=>{const{setBoardWithSection:e}=this.props;this.setState({isSectionOpen:!1,selectedBoardId:"",selectedBoardCategory:""}),e&&e(null)}),k(this,"handleSectionClick",(e,t)=>{const{onItemChosen:n}=this.props;Object(y.b)(101,{component:13282,element:36,objectId:t.id,view:91,grid_index:t.gridIndex}),n({boardId:t.id,url:e.slug?`${t.url}${e.slug}/`:t.url,sectionId:e.id,title:e.title||"",type:e.type,imageCoverUrl:t.image_cover_url})}),k(this,"getPinBuilderSuggestions",(async function(){const{pin:e}=t.props;if(e){var n;const i=g.d.create("BoardTitleSuggestionsResource",{pin_id:e.id}),o=await i.callGet({retries:1,showError:!1});if(null!==(n=o.resource_response)&&void 0!==n&&n.data){const e=o.resource_response.data.map(e=>({title:e.title}))||[];t.setState({boardSuggestions:e})}}})),k(this,"getAllBoards",()=>{var e;const{boardResource:t,advertiser_id:n}=this.props;return((null==t||null===(e=t.data)||void 0===e?void 0:e.all_boards)||[]).filter(e=>!n||"secret"!==e.privacy)}),k(this,"getShortlist",()=>{var e;const{suggestedBoardsShortListResource:t,displayShortlistMostRecentBoard:n,boardResource:i}=this.props,o=(null==i||null===(e=i.data)||void 0===e?void 0:e.boards_shortlist)||[];return n?o:(null==t?void 0:t.data)||[]}),k(this,"getBoards",e=>"allBoards"===e?this.getAllBoards():"shortlist"===e?this.getShortlist():[]),k(this,"handleBoardWithSectionsClick",e=>{const{setBoardWithSection:t}=this.props,{selectedBoardId:n,selectedBoardCategory:i}=this.state,o=this.getBoards(e.category).find(({id:t})=>t===e.id),r=n===e.id&&i===e.category;o&&t&&t(o),this.setState({isSectionOpen:!0,selectedBoardId:r?"":e.id,selectedBoardCategory:r?"":e.category})}),k(this,"handleBoardClick",({board:e,toggleSections:t})=>{const{onItemChosen:n}=this.props;this.setState({searchBoxFocused:!1}),t?this.handleBoardWithSectionsClick({id:e.id,category:e.category}):(Object(y.b)(101,{component:13282,element:36,objectId:e.id,view:91,grid_index:e.gridIndex}),n({boardId:e.id,url:e.url,title:e.name||"",type:e.type,imageCoverUrl:e.image_cover_url}))}),k(this,"handleSearchQueryUpdate",e=>{this.setState(t=>({...t,searchQuery:e}))}),k(this,"boardSectionsHeaderRef",Object(i.createRef)())}componentDidMount(){this.props.boardResource&&this.props.boardResource.isLoaded&&this.setPWTLoadingEnd()}componentDidUpdate(e,t){e.boardResource&&!e.boardResource.isLoaded&&this.props.boardResource&&this.props.boardResource.isLoaded&&this.setPWTLoadingEnd(),this.state.isSectionOpen&&!t.isSectionOpen&&this.boardSectionsHeaderRef.current&&this.boardSectionsHeaderRef.current.focus()}setPWTLoadingEnd(){const{boardResource:e,boardPickerStopwatch:t}=this.props;t&&(!e||e.error?t.error():t.stop())}render(){const{boardResource:e,buttonText:t,changeBoardModal:n,customItem:o,onBoardCreate:a,onButtonClick:c,paneHeight:d,paneWidth:l,showSaveToProfile:u,showCreateBoardButton:h,showFlyoutSaveButton:g,showSections:m,showSectionSaveButton:v,suggestedBoardsShortListResource:S,useStoryboardStyle:_,useLegoLayout:y}=this.props,{boardSuggestions:w,isSectionOpen:I,searchBoxFocused:C,searchQuery:B}=this.state;if(!e)return null;const{isLoaded:T,error:R}=e;let E=[];(T&&!R||S&&S.data&&!S.error)&&(E=this.getItems(!!y));const L=E.filter(e=>e&&"allBoards"===e.category).length;L<=3&&0===w.length&&this.getPinBuilderSuggestions();const A=_?200:322,D=_?214:334,k=d||290,F=null===I?"":"BoardsSlideRight",G=e=>Object(s.jsxs)(i.Fragment,{children:[!y&&Object(s.jsx)(r.q,{}),Object(s.jsx)(r.f,{overflow:"hidden",height:U(y),borderStyle:y&&L>=3&&E.length>1?"shadow":"none",dangerouslySetInlineStyle:{__style:{borderBottomRightRadius:8,borderBottomLeftRadius:8}},children:Object(s.jsx)(b,{onCreateBoardClick:()=>a({title:this.state.searchQuery}),isBoardCreate:e,useLegoLayout:y})})]});return Object(s.jsxs)(r.f,{width:y&&!n?"100%":l,rounding:2,overflow:"hidden",height:_||n?"100%":N(y),color:"white",zIndex:x.a,children:[T?null:Object(s.jsx)(r.u,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:y&&!n?M:l,children:Object(s.jsx)(r.U,{accessibilityLabel:this.props.i18n._("loading board picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!0})}),Object(s.jsx)(r.u,{direction:"row",children:T&&Object(s.jsx)("div",{className:I?"BoardsSlideLeft":F,children:Object(s.jsx)(r.f,{position:"relative",children:Object(s.jsxs)(r.f,{display:"flex",direction:"row",width:y&&!n?720:2*(null!=l?l:0),zIndex:new r.t(0),children:[Object(s.jsxs)(r.u,{alignItems:"stretch",justifyContent:"start",direction:"column",width:y&&!n?M:l,children:[y&&!n&&Object(s.jsx)(r.u,{alignItems:"center",height:64,justifyContent:"center",children:Object(s.jsx)(r.cb,{align:"center",size:"lg",weight:"bold",children:u?this.props.i18n._("Save","PinBetterSave.BoardFlyout.SavePlaceholder","flyout header text to indicate save options"):this.props.i18n._("Save to board","PinBetterSave.BoardFlyout.SaveToBoardPlaceholder","flyout header text")})}),!n&&Object(s.jsx)(r.f,{padding:y?0:3,paddingX:y?4:3,height:y?64:"auto",children:Object(s.jsx)(f.a,{accessibilityLabel:this.props.i18n._("Search through your boards","search bar placeholder text","search bar placeholder text"),focused:C,id:"pickerSearchField",onChange:({value:e})=>this.handleSearchQueryUpdate(e),placeholder:this.props.i18n._("Search","search bar placeholder text","search bar placeholder text"),value:B})}),Object(s.jsxs)(r.f,{minHeight:y?290:A,maxHeight:y?k:A,overflow:"scrollY",children:[S&&!S.isLoaded?Object(s.jsx)(j.a,{id:"suggestedBoardsContainer",children:Object(s.jsx)(r.u,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:128.5,width:"100%",children:Object(s.jsx)(r.U,{accessibilityLabel:this.props.i18n._("loading board picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!0})})}):null,o,E.map((e,n)=>"header"===e.type?Object(s.jsx)(r.f,{paddingX:y?4:3,paddingY:1,marginTop:n>0?2:1,children:Object(s.jsx)(r.cb,{size:y?"sm":"md",children:e.title})},e.title):Object(s.jsx)(r.f,{children:Object(s.jsx)(P,{board:e,buttonText:t,onClick:e=>{this.handleBoardClick({board:e,toggleSections:m&&!!e.section_count})},onButtonClick:c,shouldOpenSections:m,showFlyoutSaveButton:g,showSaveToProfile:u,useLegoLayout:y})},`${e.category}-${e.id}`)),L<=3&&Object(s.jsx)(O,{onClick:a,pinBuilderSuggestions:w,inWebRepinFlowExp:y})]}),h&&G(!0)]}),Object(s.jsxs)(r.f,{display:"flex",direction:"column",width:y&&!n?M:l,marginBottom:y?2:0,children:[Object(s.jsxs)(r.u,{alignContent:"center",alignItems:"center",direction:"row",justifyContent:"center",children:[Object(s.jsx)(r.m,{span:2,children:Object(s.jsx)(r.f,{display:"flex",justifyContent:"start",alignContent:"center",alignItems:"center",marginStart:3,children:Object(s.jsx)(r.x,{accessibilityLabel:"Back button",icon:"arrow-back",iconColor:"darkGray",onClick:this.handleBack,size:"sm"})})}),Object(s.jsx)(r.m,{span:8,children:Object(s.jsx)(r.u,{alignItems:"center",height:y?64:52,justifyContent:"center",children:Object(s.jsx)(r.cb,{weight:"bold",children:y?this.props.i18n._("Save Pin to","PinBetterSave.BoardFlyout.SectionHeader","Header for section header"):this.props.i18n._("Choose section","Header for section header","Header for section header")})})}),Object(s.jsx)(r.m,{span:2,children:Object(s.jsx)(r.f,{})})]}),!y&&Object(s.jsx)(r.q,{}),Object(s.jsx)(r.f,{minHeight:y?354:D,maxHeight:y?k:D,overflow:"scrollY",children:E?Object(s.jsx)(i.Fragment,{children:E&&E.map(e=>"header"===e.type?null:Object(s.jsx)(r.f,{children:e.isOpen&&Object(s.jsxs)(i.Fragment,{children:[y&&Object(s.jsx)(r.f,{marginStart:4,marginTop:2,paddingY:1,children:Object(s.jsx)(r.cb,{size:"sm",children:this.props.i18n._("Board","PinBetterSave.BoardFlyout.BoardPickerTitle","board title on section picker")})}),Object(s.jsx)(P,{board:e,buttonText:t,isSectionOpen:!0,onClick:e=>{this.handleBoardClick({board:e,toggleSections:!1})},onButtonClick:c,shouldOpenSections:!1,showFlyoutSaveButton:g,ref:this.boardSectionsHeaderRef,useLegoLayout:y}),Object(s.jsx)(p,{board:e,buttonText:t,onClick:this.handleSectionClick,onButtonClick:c,showSectionSaveButton:v,useLegoLayout:y})]})},`${e.category}-${e.id}`))}):null}),h&&!n&&G(!1)]})]})})})})]})}}function G(e){const t=Object(c.c)();return Object(s.jsx)(F,{...e,boardPickerStopwatch:Object(D.c)(),requestContext:Object(A.d)(),i18n:t})}function H(e,t){const{advertiser:n}=e;if(t&&n){const n=e.advertiser;if(t.isAuth&&n.is_impersonation)return{hasMUA:!1,advertiser_id:n.id,username:n.owner_user_id};if(t.isAuth&&n.owner_user_id!==t.id)return{hasMUA:!0,advertiser_id:n.id,username:n.owner_user_id};if(t.isAuth&&n.owner_user_id===t.id)return{hasMUA:!1,advertiser_id:n.id,username:"me"}}return{advertiser_id:void 0,hasMUA:void 0,username:void 0}}function W(e){const{advertiser_id:t,hasMUA:n}=e;let{username:i}=e;return e.orbacActingAs&&e.orbacActingAs.user&&e.orbacActingAs.user.username&&(i=e.orbacActingAs.user.username),{field_set_key:"board_picker",filter:n?"protected":"all",...i?{username:i}:Object.freeze({}),...t?{advertiser_id:t}:{}}}function q(e){return(t,n)=>t(Object(_.f)("BoardPickerBoardsResource",W(H(n(),e))))}function z(e){const t=Object(m.b)(),n={...e,...Object(o.useSelector)(e=>H(e,t))},i=Object(h.a)({name:"BoardPickerBoardsResource",options:W(n)});return Object(s.jsx)(G,{...n,boardResource:i})}function V(e){const t=Object(L.a)();return Object(s.jsx)(z,{...e,orbacActingAs:t})}function K(e){const t=Object(h.a)({name:"BoardPickerBoardsShortlistResource",options:{pin_id:e.pin.id,shortlist_length:3,num_shortlist_suggestions:3}});return Object(s.jsx)(G,{...e,suggestedBoardsShortListResource:t})}k(F,"defaultProps",{paneWidth:320,showCreateBoardButton:!0,showFlyoutSaveButton:!0,showSections:!0,showSectionSaveButton:!0,useLegoLayout:!0})},eUcp:function(e,t,n){n.d(t,"j",(function(){return o})),n.d(t,"f",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"l",(function(){return d})),n.d(t,"i",(function(){return l})),n.d(t,"k",(function(){return u})),n.d(t,"h",(function(){return h})),n.d(t,"e",(function(){return p})),n.d(t,"b",(function(){return b})),n.d(t,"g",(function(){return f})),n.d(t,"m",(function(){return g}));var i=n("n6mq");const o=new i.t(0),r=new i.t(1),s=2,a=new i.t(s),c=2,d=new i.t(c),l=new i.t(3),u=new i.t(1),h=new i.t(3),p=3,b=4,f=(new i.t(b),new i.t(5)),g=new i.t(100)},fEA9:function(e,t,n){n.r(t),n.d(t,"PinBetterSave",(function(){return Y}));var i=n("q1tI"),o=n("/MKj"),r=n("yweb"),s=n("n6mq"),a=n("nKUr");function c({dropdownRef:e,hideDropdown:t=!1,onBoardDropdownClick:n,onSaveClick:o,renderPinSaveTooltip:c,selectedTitle:d,unselectedText:l,view:u}){const h=Object(r.c)(),p=Object(i.useRef)(),b=d||l,f="closeup"===u,g=f?"darkGray":"white";return Object(a.jsxs)(s.f,{alignItems:"center",display:"flex",width:"100%",ref:e,children:[!t&&Object(a.jsx)(s.f,{flex:"grow",paddingX:f?4:1,width:"100%",children:Object(a.jsx)(s.bb,{onTap:({event:e})=>n(e),rounding:6,children:Object(a.jsxs)(s.u,{alignItems:"center",flex:"grow",height:48,justifyContent:f?"end":"start",children:[Object(a.jsx)(s.f,{width:"auto",overflow:"auto","data-test-id":"PinBetterSaveDropdown",children:Object(a.jsx)(s.cb,{color:g,lineClamp:1,size:"lg",weight:"bold",children:b})}),Object(a.jsx)(s.f,{"data-test-id":"boardSelectionDropdown",flex:"none",marginStart:b.length<13?2:1,marginEnd:1,children:Object(a.jsx)(s.w,{accessibilityLabel:h._("Select a board you want to save to","PinBetterSave.BoardSelection.DropdownIcon","BetterSave accessibility label to change the board"),color:g,icon:"arrow-down",size:12})})]})})}),Object(a.jsx)(s.f,{"data-test-id":"PinBetterSaveButton",flex:"none",marginStart:"auto",alignSelf:f?"center":"start",children:Object(a.jsx)(s.g,{color:"red",onClick:({event:e})=>{t?n(e):o(e)},ref:p,size:"lg",text:h._("Save","PinBetterSave.BoardSelection.SaveButton","BetterSave Save label")})}),!!c&&!!p.current&&c(p.current)]})}var d=n("i1AX"),l=n("clxp"),u=n("1inl"),h=n("ajUs"),p=n("uVIr"),b=n("EC51"),f=n("juJw"),g=n("eOdZ"),j=n("lm6u");function m(e){const{action:t,additionalCreateFields:n,boardWithSection:o,children:r,onClose:s,pin:c,setCompletionPromise:d,showModal:l}=e,u=((e,t)=>{const[n,o]=Object(i.useState)([]);return Object(i.useEffect)(()=>{let n=!1;return e&&g.d.create("SectionRecommendationsResource",{pinIds:[t]}).callGet().then(e=>{var t;if(n)return;const i=null==e||null===(t=e.resource_response)||void 0===t?void 0:t.data;o(i.length>0&&i[0]||[])}),()=>{n=!0}},[e,t]),n})(l,c.id);return Object(a.jsx)(j.a,{additionalCreateFields:n,boardWithSection:o,action:t,hideSuccessAnimation:!!u.length,onClose:s,setCompletionPromise:d,showCreate:!0,shouldShowToast:!u.length,pin:c,children:e=>r({...e,sectionSuggestions:u})})}var v=n("qnp8"),O=n("uyxo"),S=n("M1Uz"),x=n("sUAf"),_=n("xkL+"),y=n("e3KR"),w=n("Wrea"),I=n("KFEb"),C=n("0zyx"),B=n("x12c"),T=n("J8m7"),R=n("EuRG"),E=n("H/Lk"),P=n("WnNx"),L=n("U4JR"),A=n("NjDU"),D=n("B6Tf"),k=n("vvax"),N=n("e0nq");class M extends i.PureComponent{constructor(...e){var t,n,i;super(...e),i=()=>{const{boardId:e}=this.props;Object(L.b)(101,{component:20,element:10805,objectId:e})},(n="handleClick")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){const{toastShown:e}=this.props;e()}render(){const{boardName:e,boardUrl:t,onHide:n}=this.props;return Object(a.jsx)(S.a,{duration:5e3,onHide:n,text:Object(a.jsx)(s.cb,{weight:"bold",children:Object(k.b)(this.props.i18n._("Find more ideas for {{ boardName }}","postRepinUpsellToast.findMoreIdeas.toast","Find more ideas for you board"),{boardName:e}).join("")}),href:t+"more_ideas/?ideas_referrer=16",onClick:this.handleClick})}}var U=Object(o.connect)(null,(e,t)=>({toastShown:()=>e(Object(N.c)(t.boardId))}))((function(e){const t=Object(r.c)();return Object(a.jsx)(M,{...e,i18n:t})})),F=n("Sp3T"),G=n("w70y"),H=n("ZdPf"),W=n("seP0"),q=n("nGHF"),z=n("0nTG"),V=n("EC67");function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q({savedInfo:e,variant:t}){const n=Object(r.c)(),i="closeup"===t,o="boardless"===e.type?n._("Profile","PinBetterSave.PinBetterSaveSavedStatus.savedTitle","Text indicating saved to your profile"):e.title;return Object(a.jsx)(b.a,{onClick:({event:e})=>{e.stopPropagation()},href:e.url||"",children:Object(a.jsx)(s.f,{dangerouslySetInlineStyle:{__style:{color:"#333"}},marginStart:i?1:0,children:Object(a.jsx)(s.cb,{color:"darkGray",size:"lg",weight:"bold",align:i?"end":void 0,children:o.length<=20?o:Object(f.a)(o,20)})})})}class Y extends i.Component{constructor(...e){var t;super(...e),t=this,K(this,"state",{boardWithSection:null,createdBoard:null,suggestedBoardTitle:"",showBoardFlyout:!1,showEmailVerificationModal:!1,showRepinModal:!1,sensitiveContentNotice:null}),K(this,"setBoardSaveCompletionPromise",e=>{const{createdBoard:t}=this.state;this._repinCompletionPromise=e,this._repinCompletionPromise.promise.then(e=>{if(!e.board)return;const{board:{id:n,name:i,url:o}}=e,r={boardId:n,title:i,url:o};this.updateSelectedBoardOrSection(r),this.updateSavedState({...r,localPinId:e.id}),t&&Object(H.d)(t.sensitivity)&&Object(H.c)(t.sensitivity)?this.setState({sensitiveContentNotice:t.sensitivity.notice||t.sensitivity.notices[0]}):this.handleRepinHide()})}),K(this,"updateSavedState",e=>{const{reduxLocation:t,save:n,searchQueryInvalidated:i,onSave:o,pin:{id:r}}=this.props,s=t.query&&t.query.q||Object(C.a)(t.history);n({pinId:r,...e}),s&&i(s),o&&e.localPinId&&o()}),K(this,"updateSelectedBoardOrSection",e=>{const{selectBoardOrSection:t,pin:{id:n}}=this.props;t({pinId:n,...e})}),K(this,"updateSelectedItem",()=>{const{initialSelection:e,selectedItem:t}=this.props;!t&&e&&this.updateSelectedBoardOrSection(e)}),K(this,"dropdownRef",Object(i.createRef)()),K(this,"handleItemChosen",e=>{this.updateSelectedBoardOrSection(e),this.hideFlyout(!0),this.save(e)}),K(this,"handleBoardCreate",this.props.requireAuth(({title:e=""}={})=>{this.hideFlyout(!0),this.setState(t=>({...t,suggestedBoardTitle:e,showRepinModal:!0}));const{onToggleFlyout:t}=this.props;t&&t(!0,!0)})),K(this,"handleBoardCreated",e=>{this.setState({createdBoard:e})}),K(this,"handleRepinHide",()=>{this.setState(e=>({...e,suggestedBoardTitle:"",showRepinModal:!1}));const{onToggleFlyout:e}=this.props;e&&e(!1,!1)}),K(this,"handleBoardDropdownClick",e=>{const{pin:{id:t},viewParameter:n,viewType:i,location:{pathname:o},boardPickerStopwatch:r}=this.props;e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),this.state.showBoardFlyout?this.hideFlyout(!0):(Object(L.b)(101,{view:i,viewParameter:n,component:13282,element:10960,objectId:t}),r&&(r.start(),Object(W.b)(r,o)),this.showFlyout())}),K(this,"handleSaveClick",this.props.requireAuth((async function(e){const{selectedItem:n,viewType:i,viewParameter:o}=t.props;n?(e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),Object(L.b)(101,{...i?{view:i}:{},...o?{viewParameter:o}:{},component:13282,element:36,objectId:n.boardId,grid_index:4}),await t.save(n)):t.handleBoardDropdownClick(e)}))),K(this,"setBoardWithSection",e=>{this.setState({boardWithSection:e})}),K(this,"handleEditSubmit",({boardId:e,sectionId:t,url:n,title:i})=>{const{pin:{id:o},savedInfo:{localPinId:r}={}}=this.props;this.updateSavedState({pinId:o,localPinId:r,boardId:e,sectionId:t||"",url:n,title:i})}),K(this,"resetPinSavedState",()=>{this.updateSavedState({boardId:"",localPinId:"",sectionId:"",title:"",url:""})}),K(this,"deleteSavedState",e=>{const{unsave:t,onDelete:n,pin:{id:i},toastManagerContext:o}=this.props;t({pinId:i}),e&&g.d.create("PinResource",{id:e}).callDelete().then(()=>{o.showToast(({onHide:e})=>Object(a.jsx)(S.a,{onHide:e,text:this.props.i18n._("Pin deleted!","PinBetterSave.SavedPin.Delete","User deleted their pin")}))}),n&&n()}),K(this,"save",(async function(e){const{addNewPinToPinsFeed:n,isLimitedLogin:i,mostRecentBoard:o,pin:{id:r},postRepinMoreIdeasUpsell:s,postRepinUpsellDisabled:c,save:d,setMostRecentBoard:l,toastManagerContext:h}=t.props;t.updateSavedState(e);const p=!!e.sectionId,b="boardless"===e.type;try{const{resource_response:{data:i}}=await t.getPinResource(e).callCreate({showError:!1}),u=e.url,{incrementBoardPinCount:f,updateUserPinCount:g,viewerUserId:j}=t.props;!c&&u&&!b&&(({boardId:e,boardUrl:t,postRepinMoreIdeasUpsell:n})=>{if(!t)return!1;const{recentSaves:i,recentUpsell:o}=n;if(o[e])return!1;const r=i.findIndex(t=>t.boardId!==e);return(-1===r?i.length:r)+1>=3})({boardId:e.boardId,boardUrl:u,postRepinMoreIdeasUpsell:s})&&h.showToast(({onHide:t})=>Object(a.jsx)(U,{boardId:e.boardId,boardName:e.title,boardUrl:u,onHide:t})),d({pinId:r,...{...e,localPinId:i.id,localPin:i}}),B.b.publish("currentUser","pinCreated",i),B.b.publish(i.board.id,"pinCreated",{pin:i}),f({boardId:e.boardId,sectionId:e.sectionId}),g(j);let m=e.sectionId?e.sectionId:e.boardId;b?(m=j,n(m,i.id,!1,b)):n(m,i.id,p,!1);const{id:O,images:S,board:x}=i,_=S["236x"];t.updateSavedState({pinId:r,...{...e,localPinId:O}}),h.showToast(({onHide:n})=>Object(a.jsx)(v.a,{boardName:e.title,boardUrl:e.url||x.url,isBoardlessPin:b,onHide:n,onUndo:()=>t.deleteSavedState(O),pinImageUrl:b&&e.url?e.url:_.url})),o&&e.boardId!==o.id&&!b&&l(e.boardId,e.title,e.url)}catch(f){f&&f.api_error_code===T.B?t.setState({showEmailVerificationModal:!0}):i||u.a.showError(f.message_detail||f.message),t.resetPinSavedState()}})),K(this,"hideFlyout",(e=!1)=>{const{onToggleFlyout:t}=this.props;this.setState({showBoardFlyout:!1}),t&&t(!1,e)}),K(this,"closeModal",()=>{this.setState({showEmailVerificationModal:!1})})}componentDidMount(){const{onMount:e}=this.props;this.updateSelectedItem(),e&&e()}componentDidUpdate(){this.updateSelectedItem()}getPinResource(e){const{carouselData:t,location:n,previousHistory:i,pin:o}=this.props,r={carousel_slot_index:t&&t.index||0,clientTrackingParams:Object(h.a)(o,n,i)||(o.tracking_params||"")+"~0",description:o.description||"",image_base64:o.image_base64,is_buyable_pin:!1,is_removable:o.promoted_is_removable,link:o.link,pin_id:o.id||"",title:o.title||"",...e.boardId&&"boardless"!==e.type?{board_id:e.boardId}:null,...e.sectionId?{section:e.sectionId}:null,...Object(z.f)(o)||{}};return g.d.create("RepinResource",r)}showFlyout(){const{onToggleFlyout:e}=this.props;this.setState({showBoardFlyout:!0}),e&&e(!0,!0)}render(){const{boardResource:e,carouselData:t,onToggleModal:n,pin:i,renderPinSaveTooltip:o,renderSavedStatus:r,savedInfo:u,selectedItem:h,unselectedText:p,variant:b,viewParameter:f,hideDropdown:g,showSaveToProfile:j}=this.props,{boardWithSection:v,showBoardFlyout:S,showEmailVerificationModal:x,showRepinModal:_,sensitiveContentNotice:w,suggestedBoardTitle:I}=this.state,C=Object(a.jsx)(y.a,{boardResource:e,setBoardWithSection:this.setBoardWithSection,showSaveToProfile:j,onItemChosen:this.handleItemChosen,onBoardCreate:this.handleBoardCreate,pin:i});return Object(a.jsxs)(l.a,{name:"PinBetterSave",children:[x&&Object(a.jsx)(d.a,{onConfirm:this.closeModal}),Object(a.jsxs)(s.f,{display:"closeup"===b?"flex":void 0,height:60,children:[null!=u&&u.title?Object(a.jsx)(O.a,{currentCarouselIndex:t&&t.index,onDeleteSavedState:()=>this.deleteSavedState(u.localPinId),onEditSubmit:this.handleEditSubmit,onToggleModal:n,pinId:u.localPinId,variant:b,viewParameter:f,shouldUseLegoStyles:!0,children:r&&u&&r({savedInfo:u,variant:b})}):Object(a.jsx)(c,{dropdownRef:this.dropdownRef,onBoardDropdownClick:this.handleBoardDropdownClick,onSaveClick:this.handleSaveClick,renderPinSaveTooltip:o,selectedTitle:h&&h.title,unselectedText:p,view:b,hideDropdown:g}),Object(a.jsx)(m,{additionalCreateFields:{is_stl_pin:Object(z.k)(i)},boardWithSection:v,action:"create",onClose:this.handleRepinHide,setCompletionPromise:this.setBoardSaveCompletionPromise,showModal:_,pin:i,children:({boardSavedTo:e,dismissModal:t,displaySuccessAnimation:n,handleAbort:i,handleNewBoardAnimationCompletion:o,handleSocialConnectSet:r,handleSaveToBoard:s,newPin:c,updateDescription:d,modalTitle:l,sectionSuggestions:u,setModalTitle:h,pin:p})=>Object(a.jsx)(D.c,{boardSavedTo:e,isInModal:!0,displaySuccessAnimation:n,dismissModal:t,handleAbort:i,handleNewBoardAnimationCompletion:o,handleSocialConnectSet:r,handleSaveToBoard:s,updateDescription:d,onBoardCreated:this.handleBoardCreated,sensitiveContentNotice:w,pin:p,pwtAuxData:{pin_create_method:"repin"},sectionSuggestions:u,suggestedBoardTitle:I,boardWithSection:v,shouldRenderContent:_,newPin:c,modalTitle:l,setModalTitle:h,showCreate:!0})}),S&&Object(a.jsx)(s.A,{children:Object(a.jsx)(s.L,{anchor:this.dropdownRef.current,idealDirection:"down",onDismiss:this.hideFlyout,positionRelativeToAnchor:!1,size:"xl",children:C})})]})]})}}K(Y,"defaultProps",{variant:"pin",renderSavedStatus:({savedInfo:e,variant:t})=>Object(a.jsx)(Q,{savedInfo:e,variant:t})});t.default=Object(i.memo)((function(e){var t;const n=Object(r.c)(),{pin:{id:i}}=e,c=Object(G.a)({name:"BoardPickerBoardsResource",options:{field_set_key:"board_picker"}}),d=Object(G.a)({name:"BoardPickerBoardsShortlistResource",options:{pin_id:e.pin.id,shortlist_length:2,num_shortlist_suggestions:2,suggestions_only:!0,min_confidence:.5}}),l=Object(V.h)(),u=Object(V.i)(),h=Object(q.b)(),b=Object(W.c)(),f=Object(_.b)(),g=Object(o.useDispatch)(),j=Object(o.useSelector)(({mostRecentBoard:e})=>e),m=Object(o.useSelector)(({pins:e})=>e[i]),v=Object(o.useSelector)(({history:e})=>e.previous),O=Object(o.useSelector)(({location:e})=>e),S=Object(o.useSelector)(({ui:e})=>e.postRepinMoreIdeasUpsell);let y=e.initialSelection,C=(null===(t=y)||void 0===t?void 0:t.title)||"",B=!0;const{showEnabledSaveBehavior:T}=Object(x.a)(f.id||""),L={boardId:"",title:n._("Profile","pinBetterSave.initialSelection.boardlessPinsOption","Option to save to profile without a board."),type:"boardless",url:"/me/"},D=Object(F.a)();if(!y){const e=d&&d.data&&d.data[0];y=d&&d.isLoaded&&e&&{boardId:e.id,title:e.name,url:e.url}||d&&d.isLoaded&&!e&&T&&L||d&&d.isLoaded&&!e&&j&&{boardId:j.id,title:j.name,url:j.url}||void 0,C=d&&d.isLoaded?n._("Select","BetterSave label to pick a board from the list","BetterSave label to pick a board from the list"):"...",B=!1}return Object(a.jsx)(s.f,{overflow:"hidden",children:Object(a.jsx)(Y,{...e,addNewPinToPinsFeed:(e,t,n,i)=>{let o=n?I.a.SECTION_PINS:I.a.BOARD_PINS;i&&(o=I.a.BOARDLESS_PINS),g(Object(p.a)({feedId:e,feedType:o,itemIds:[t],itemType:"pin"}))},boardResource:c,boardPickerStopwatch:b,carouselData:m&&m.carousel_data,history:l,incrementBoardPinCount:({boardId:e,sectionId:t})=>g(Object(w.d)({boardId:e,sectionId:t,increment:1})),initialSelection:y,isLimitedLogin:f.isLimitedLogin,location:u,mostRecentBoard:j,postRepinMoreIdeasUpsell:S,postRepinUpsellDisabled:B,previousHistory:v,reduxLocation:O,save:e=>g(Object(N.a)(e)),savedInfo:m&&m.savedInfo,searchQueryInvalidated:e=>g(Object(R.b)(e)),selectBoardOrSection:e=>g(Object(N.b)(e)),selectedItem:m&&m.selectedItem,setMostRecentBoard:(e,t,n)=>g(Object(E.a)(e,t,n)),showSaveToProfile:T,showRepinAnimation:e=>g(Object(P.d)(e)),toastManagerContext:h,unsave:e=>g(Object(N.d)(e)),unselectedText:C,updateUserPinCount:e=>g(Object(A.c)({userId:e,increment:1})),viewerUserId:f.isAuth?f.id:"",requireAuth:D,i18n:n})})}))},i1AX:function(e,t,n){var i=n("q1tI"),o=n("TgLd"),r=n("eOdZ"),s=n("yweb"),a=n("n6mq"),c=n("nKUr");t.a=({onConfirm:e})=>{const t=Object(s.c)(),[n,d]=Object(i.useState)(!1),l=()=>{d(!0),r.d.create("ApiResource",{url:"/v3/users/email/verify/resend/"}).callCreate()};return Object(c.jsx)(o.b,{accessibilityModalLabel:t._("Verify your email","Accessible label for email verification being required","Accessible label for email verification being required"),onDismiss:e,heading:t._("Verify your email","Accessible label for email verification being required","Accessible label for email verification being required"),footer:Object(c.jsxs)(a.u,{justifyContent:"end",gap:2,children:[n?Object(c.jsx)(a.g,{fullWidth:!0,size:"lg",color:"gray",text:t._("Email sent","Button text for verification email being sent","Button text for verification email being sent"),disabled:n,onClick:l}):Object(c.jsx)(a.g,{fullWidth:!0,size:"lg",color:"gray",text:t._("Resend email","Button text for resending email verification email","Button text for resending email verification email"),disabled:n,onClick:l}),Object(c.jsx)(a.g,{fullWidth:!0,size:"lg",color:"red",text:t._("Got it","Button text for acknowledging email verificaiton is required","Button text for acknowledging email verificaiton is required"),onClick:e})]}),role:"alertdialog",children:Object(c.jsx)(a.f,{padding:8,children:Object(c.jsx)(a.cb,{align:"center",size:"lg",children:t._("Keep your account secure by verifying your email address. Check the inbox associated with this account for an email from us to continue using Pinterest.","Inform users that they need to verify their email to keep their account secure and continue using Pinterest","Inform users that they need to verify their email to keep their account secure and continue using Pinterest")})})})}},jHGc:function(e,t,n){n.r(t),n.d(t,"PinRepEditButton",(function(){return a}));var i=n("yweb"),o=n("dtqy"),r=n("n6mq"),s=n("nKUr");function a({handlePinEditButtonClick:e,style:t,useLegoStyles:n=!1,usePersistentOneClickSaveStyles:o,wrappingIconStyle:a,shouldUseLegoStyles:c,onDelete:d}){const l=Object(i.c)(),u=Object(s.jsx)(r.x,{accessibilityLabel:l._("Edit","edit button on pin","edit button on pin"),bgColor:t&&t.bgColor||"white",icon:"edit",iconColor:t&&t.iconColor||"darkGray",onClick:({event:t})=>e(t),size:t&&t.size||"md"});return c?Object(s.jsx)(r.g,{fullWidth:!0,size:"lg",color:"gray",text:l._("Saved","PinRepEditButton.SavedButton","saved button on pin"),onClick:d,accessibilityLabel:l._("Pin Saved Button","PinRepEditButton.SavedButtonLabel","saved button label on pin"),selected:!0}):n||o?Object(s.jsx)("div",{style:{...a||{}},children:u}):u}t.default=Object(o.a)(a)},l9OW:function(e,t,n){var i=n("SKAX"),o=n("MMmD");e.exports=function(e,t){var n=-1,r=o(e)?Array(e.length):[];return i(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}},lQqw:function(e,t,n){var i=n("MMmD");e.exports=function(e,t){return function(n,o){if(null==n)return n;if(!i(n))return e(n,o);for(var r=n.length,s=t?r:-1,a=Object(n);(t?s--:++s<r)&&!1!==o(a[s],s,a););return n}}},"lm/5":function(e,t,n){var i=n("fmRc"),o=n("wF/u");e.exports=function(e,t,n,r){var s=n.length,a=s,c=!r;if(null==e)return!a;for(e=Object(e);s--;){var d=n[s];if(c&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++s<a;){var l=(d=n[s])[0],u=e[l],h=d[1];if(c&&d[2]){if(void 0===u&&!(l in e))return!1}else{var p=new i;if(r)var b=r(u,h,l,e,t,p);if(!(void 0===b?o(h,u,3,r,p):b))return!1}}return!0}},"mVx/":function(e,t,n){var i=n("XKAG")(n("JELi"));e.exports=i},nKlH:function(e,t,n){n.d(t,"a",(function(){return s}));var i=n("q1tI"),o=n("n6mq"),r=n("nKUr");function s(e){const{accessibilityLabel:t,focused:n,id:s,onBlur:a,onChange:c,onFocus:d,placeholder:l,value:u,size:h="lg"}=e,p=Object(i.useRef)(null);return Object(i.useEffect)(()=>{if(n){const e=p.current;window.requestAnimationFrame(()=>{const t=e&&e.querySelector("input");t instanceof HTMLInputElement&&t.focus()})}},[n]),Object(r.jsx)(o.f,{ref:p,children:Object(r.jsx)(o.Q,{accessibilityLabel:t,id:s,onBlur:a,onChange:c,onFocus:d,placeholder:l,size:h,value:u})})}},qnp8:function(e,t,n){n.d(t,"a",(function(){return d}));var i=n("EC51"),o=n("M1Uz"),r=n("yweb"),s=n("vvax"),a=n("n6mq"),c=n("nKUr");function d({boardName:e,boardUrl:t,isBoardlessPin:n,isFromPinBuilder:d,newPin:l,onChangeButtonClick:u,onVisitButtonClick:h=(()=>{}),onHide:p,onUndo:b,pinImageUrl:f}){const g=Object(r.c)(),j=Object(c.jsx)(a.f,{color:"lightGray",display:"flex",height:48,overflow:"hidden",width:48,children:Object(c.jsx)(a.f,{padding:3,children:Object(c.jsx)(a.w,{accessibilityLabel:g._("Saved to profile thumbnail","PostSavedPinToast.thumbnail.accessibilityLabel","Thumbnail for saved to profile."),color:"darkGray",icon:"history",size:24})})}),m=(!!u||!!b)&&Object(c.jsx)(a.g,{text:l&&n&&u?g._("Change","PostSavedPinToast.ChangeButton","Change saved pin to a different destination"):g._("Undo","PostSavedPinToast.UndoButton","Undo Saved Pin"),size:"lg",onClick:l&&n&&u?()=>u(l):b},"button-key"),v=Object(c.jsx)(a.g,{text:g._("Visit","PostSavedPinToast.VisitButton","Visit Pin saved from PinBuilder"),size:"lg",onClick:h});return Object(c.jsx)(o.a,{button:d?v:m,duration:n?6e3:3e3,iconThumbnail:n?j:void 0,imageUrl:f,onHide:p,text:Object(c.jsx)(a.cb,{size:"md",lineClamp:1,children:Object(s.b)(g._("Saved to {{ destination }}","PostSavedPinToast.SavedToBoardLabel","Saved to label for better save"),{destination:Object(c.jsx)(i.a,{href:n?"/me/":null!=t?t:"",children:Object(c.jsx)(a.cb,{size:"md",weight:"bold",lineClamp:1,children:e},"PostSavedPinToastBoardName")})})})})}},r8eU:function(e,t,n){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}));var i=n("QLaP"),o=n.n(i);class r{constructor(e,t){o()(e,"You must pass a requestContext to check an Experiment"),o()(t,"You must pass the name of the experiment to check"),this.requestContext=e,this.experimentName=t.toLowerCase()}_getGroup(e){return e?this.requestContext.experiments.v2ActivateExperiment(this.experimentName)||"":this.requestContext.experiments.v2GetGroup(this.experimentName)||""}}class s extends r{getGroup(e=!1){return this._getGroup(e)}}class a extends r{_isTreatment(e){return e.startsWith("enabled")||e.startsWith("employee")}enabled(){return this._isTreatment(this._getGroup(!0))}enabledWithNoActivation(){return this._isTreatment(this._getGroup(!1))}}},s7xj:function(e,t,n){n.d(t,"a",(function(){return u}));var i=n("xweI"),o=n.n(i),r=n("yweb"),s=n("xkL+"),a=n("n6mq"),c=n("qpbZ"),d=n("nKUr");function l(e){var t,n;const i=null!==(t=e.imageMediumUrl)&&void 0!==t?t:e.image_medium_url;return{name:null!==(n=e.fullName)&&void 0!==n?n:e.full_name,src:"https://s.pinimg.com/images/user/default_75.png"===i?void 0:i}}function u({board:e,forceViewer:t,isCompact:n,ownerOnly:i}){const u=Object(r.c)(),h=Object(s.b)(),p=i?[l(e.owner)]:function(e,t,n){const{collaborated_by_me:i,collaborating_users:r=[],owner:s}=e,a=[s];if(i||n){const e=r.findIndex(e=>t.isAuth&&e.id===t.id);if(-1!==e){const t=r.splice(e,1)[0];a.push(t)}else a.push(t)}const c=o()(r,"full_name");return[...a,...c]}(e,h,t).map(l),b=p.slice(0,3).map(e=>e.name);let f="";switch(p.length){case 3:f=Object(c.c)(""+u._("{{ first }}, {{ second }}, and {{ last }}","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars","List of three usernames"),{first:""+b[0],second:""+b[1],last:""+b[2]});break;case 2:f=Object(c.c)(""+u._("{{ first }} and {{ second }}","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars","List of two usernames."),{first:""+b[0],second:""+b[1]});break;default:f=b.join(", ")}const g=p.length>3?Object(c.c)(", "+u.ngettext("Collaborators: {{ userNames }} and {{ leftCount }} more.","Collaborators: {{ userNames }} and {{ leftCount }} more.",p.length-3,"CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree","Accessibility label that lists the names of collaborators and a final count of non-displayed avatars"),{userNames:f,leftCount:""+(p.length-3)}):Object(c.c)(", "+u._("Collaborators: {{ userNames }}.","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree","Accessibility label that lists the names of collaborators"),{userNames:f});return Object(d.jsx)(a.c,{accessibilityLabel:g,collaborators:p,size:n?"xs":"sm"})}},"sH+O":function(e,t,n){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));const o=(e,t)=>{const n=/^\d{1,3}\.\d{1,3}(?:\.\d{1,6})?$/;if(null==e||!e.match(n)||null==t||!t.match(n))return null;const i=null==e?void 0:e.split("."),o=null==t?void 0:t.split("."),r=Math.max((null!=i?i:"").length,(null!=o?o:"").length);for(let c=0;c<r;c+=1){var s,a;const e=c<(null!==(s=null==i?void 0:i.length)&&void 0!==s?s:0)?parseInt(null==i?void 0:i[c],10):0,t=c<(null!==(a=null==o?void 0:o.length)&&void 0!==a?a:0)?parseInt(null==o?void 0:o[c],10):0;if(e<t)return-1;if(e>t)return 1}return 0};class r{constructor(e,t,n){i(this,"start",Date.now()),i(this,"paused",!1),this.onProgress=e,this.onComplete=t,this.duration=n,this.remaining=n,"undefined"!=typeof window&&(this.intervalId=window.setInterval(()=>{const e=this.paused?this.duration-this.remaining:this.duration-this.remaining+(Date.now()-this.start);this.onProgress(e/this.duration)},500),this.resume())}currentTime(){return this.duration-this.remaining}pause(){this.paused=!0,window.clearTimeout(this.timerId),this.remaining-=Date.now()-this.start;const e=this.duration-this.remaining;this.onProgress(e/this.duration)}resume(){this.paused=!1,this.start=Date.now(),window.clearTimeout(this.timerId),this.timerId=window.setTimeout(this.onComplete,this.remaining)}clear(){window.clearTimeout(this.timerId),window.clearInterval(this.intervalId)}}},"ut/Y":function(e,t,n){var i=n("ZCpW"),o=n("GDhZ"),r=n("zZ0H"),s=n("Z0cm"),a=n("+c4W");e.exports=function(e){return"function"==typeof e?e:null==e?r:"object"==typeof e?s(e)?o(e[0],e[1]):i(e):a(e)}},uyxo:function(e,t,n){n.d(t,"a",(function(){return s}));var i=n("jHGc"),o=n("n6mq"),r=n("nKUr");function s(e){const{children:t,currentCarouselIndex:n,onDeleteSavedState:s,onEditSubmit:a,onToggleModal:c,pinId:d,variant:l,viewParameter:u,shouldUseLegoStyles:h}=e,p="pin"===l?{bgColor:"white",iconColor:"darkGray",size:"sm"}:{bgColor:"transparent",iconColor:"darkGray",size:"sm"};return Object(r.jsxs)(o.f,{alignItems:"center",display:"flex",direction:"row",marginStart:"pin"===l?-1:void 0,marginEnd:"pin"===l?-1:void 0,paddingX:"closeup"!==l||h?void 0:2,width:"closeup"===l?"100%":void 0,height:"100%",children:[t&&Object(r.jsx)(o.f,{paddingX:1,"data-test-id":"saved-info",flex:"grow",children:t}),Object(r.jsx)(o.f,{paddingX:1,flex:"none",marginStart:"auto",children:Object(r.jsx)(i.default,{component:0,onDelete:s,onSubmit:a,pinId:d,onToggleModal:c,viewParameter:u,carouselSlotCurrentIndex:n,style:p,shouldUseLegoStyles:h,useLegoStyles:"pin"===l})})]})}},xweI:function(e,t,n){var i=n("XGnz"),o=n("alwl"),r=n("EA7m"),s=n("mv/X"),a=r((function(e,t){if(null==e)return[];var n=t.length;return n>1&&s(e,t[0],t[1])?t=[]:n>2&&s(t[0],t[1],t[2])&&(t=[t[0]]),o(e,i(t,1),[])}));e.exports=a},yue5:function(e,t,n){var i=n("/9aa");e.exports=function(e,t){if(e!==t){var n=void 0!==e,o=null===e,r=e==e,s=i(e),a=void 0!==t,c=null===t,d=t==t,l=i(t);if(!c&&!l&&!s&&e>t||s&&a&&d&&!c&&!l||o&&a&&d||!n&&d||!r)return 1;if(!o&&!s&&!l&&e<t||l&&n&&r&&!o&&!s||c&&n&&r||!a&&r||!d)return-1}return 0}},zQfT:function(e,t,n){n.d(t,"a",(function(){return d}));var i=n("q1tI");const o=function(e,t){this.uid=e,this.item=t,this.next=null,this.prev=null},r=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};r.prototype.set=function(e,t){let n=this._uidToData[e];n||(n=new o(e,t),this._uidToData[e]=n,this._numItems+=1),this._moveToFront(n),this._numItems>this._maxNumItems&&this._evict()},r.prototype.get=function(e){const t=this._uidToData[e];return t?(this._moveToFront(t),t.item):null},r.prototype.remove=function(e){const t=this._uidToData[e];t&&(delete this._uidToData[e],this._firstData===t&&(this._firstData=t.next),this._lastData===t&&(this._lastData=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this._numItems-=1)},r.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},r.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1};var s=r,a=n("eOdZ");function c({resourceName:e,resourceOptions:t}){const n={...t,count:"count"in t?t.count:5},i=a.d.create(e,n),o=new s,r=()=>{i.abort()};return async function(e){const t=o.get(e);if(t){const n=t.items;if(n&&n.length){r();return{hint:t.hint,items:n,term:e}}}return e.length>=0?(async e=>{var t;if(i.isCalling()){var n;if(e===(null===(n=i.options)||void 0===n?void 0:n.term))return;r()}const{bookmarks:s,...a}=i.options||{};i.options={...a,term:e};const c=null===(t=(await i.callGet({showError:!1})).resource_response)||void 0===t?void 0:t.data,d=null==c?void 0:c.items,l=(null==c?void 0:c.hint)||{},u={hint:l,items:d};return o.set(e,u),{term:e,items:d,hint:l}})(e):{hint:{},items:[],term:e}}}function d({allowSearchOnMount:e=!1,resourceName:t,resourceOptions:n={},value:o}){const r=Object(i.useRef)(!1),s=Object(i.useRef)({}),[a,d]=Object(i.useState)([]),l=function({resourceName:e,resourceOptions:t}){const n=Object(i.useRef)();return n.current||(n.current=c({resourceName:e,resourceOptions:t})),n.current}({resourceName:t,resourceOptions:n});return Object(i.useEffect)(()=>{(async()=>{if(null!=o&&(e||r.current))if(o in s.current)d(s.current[o]);else try{const e=await l(o);if(e){const{items:t}=e;s.current[o]=t,d(t)}}catch(t){if("Resource call aborted"===t)return;throw t}r.current||(r.current=!0)})()},[o]),a}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/PinBetterSaveCommon-0289c63eb2eb9d5508be.mjs.map